<%- include('../../partials/header.ejs') %>
<body>
<%- include('../../partials/navBar.ejs') %>

<!--inicio container-->
<div class="container">

    <!--    inicio form-->
    <form action="/article/update" method="post" class="row h-100 ">

        <div class="form-group col-12 align-self-center">

            <div>
                <label for="" class="form-label display-6">Novo Titulo</label>
                <input type="text" name="title" value="<%= article.title %>"
                       class="form-control form-control-lg">
            </div>

            <div class="mt-3">
                <label for="" class="form-label">Categoria do artigo</label>
                <select class="form-select w-25 " name="categoryId">

                    <% categories.forEach(function (category) { %>
                        <% if(category.id === article.categoryId){ %>
                            <option value="<%= category.id %>" selected> <%= category.title %></option>
                        <% } else{%>
                            <option value="<%= category.id %>"> <%= category.title %></option>
                        <%  }%>
                    <% }) %>

                </select>
            </div>

            <div class="mt-3">
                <label for="" class="form-label">Texto</label>
                <textarea class="form-control" id="article" name="body"> <%= article.body %> </textarea>
            </div>
            <input type="hidden" name="id" value="<%= article.id %>">
            <button class="btn btn-success w-25 mt-3">Atualizar</button>
        </div>

    </form>
    <!--    fim form-->
</div>
<!--fim container-->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="/tinymce/tinymce.min.js"></script>
<script src="/tinymce/jquery.tinymce.min.js"></script>


<script>
    const useDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    $(function () {
        $('textarea#article').tinymce({
            height: 500,
            menubar: true,
            plugins: ['advlist autolink link image lists print preview hr searchreplace wordcount emoticons fullscreen insertdatetime media save table paste '],
            skin: useDarkMode ? 'oxide-dark' : 'oxide',
            content_css: useDarkMode ? 'dark' : 'default'
        })
    })

</script>

<%- include('../../partials/footer.ejs') %>